/* ============================
   Global Styles
============================ */
body {
    margin: 0;
    font-family: sans-serif;
    background-color: #121212;
    color: #e0e0e0;
    overflow-x: hidden;
}

/* Page Indicator */
.page-indicator {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(0,0,0,0.7);
    padding: 10px 20px;
    border-radius: 20px;
    font-size: 16px;
    color: #ffff00;
    z-index: 1000;
    backdrop-filter: blur(5px);
}

/* Full Page Sections */
.fullpage-section {
    min-height: 100vh;
    height: 100vh;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    box-sizing: border-box;
}

/* Section Content Wrapper */
.section-content {
    width: 100%;
    height: 100%;
    display: flex;
    box-sizing: border-box;
}

/* Centered Sections (Title, Intro, Conclusion) */
.section-content.centered {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
}

.section-content.centered h1 {
    font-size: 4rem;
    color: #fff;
    margin-bottom: 20px;
    font-weight: 700;
}

.section-content.centered h2 {
    font-size: 3rem;
    color: #ffff00;
    margin-bottom: 20px;
}

.section-content.centered h3 {
    font-size: 1.2rem;
    color: #c1ca48;
    margin-bottom: 10px;
}

.section-content.centered p {
    font-size: 1.4rem;
    line-height: 1.6;
    color: #ccc;
    margin: 15px 0;
}

.section-content.centered .subtitle {
    font-size: 1.5rem;
    color: #aaa;
    margin-top: 10px;
    font-style: italic;
}

.section-content.centered ul {
    text-align: left;
    max-width: 600px;
    margin: 20px auto;
    font-size: 1.3rem;
    line-height: 1.8;
}

.section-content.centered li { margin: 10px 0; }

/* Hero GIF */
.hero-gif {
    width: 60%;
    max-width: 350px;
    min-width: 260px;
    margin: 2rem auto;
    display: block;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

.click-zone {
    cursor: pointer;
    /* border: 2px dashed red; */
}

#game-feedback {
    margin-top: 8px;
    font-weight: bold;
    font-size: 1.2rem;
    color: #60e73e;
    transition: opacity 0.3s ease;
}

.modal {
  display: none; /* hidden by default */
  position: fixed;
  z-index: 10000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background: rgba(0,0,0,0.7);
}

.modal-content {
  background-color: #1a1a1a;
  margin: 15% auto;
  padding: 20px;
  border: 2px solid #ffff00;
  border-radius: 10px;
  width: 70%;
  max-width: 400px;
  color: #fff;
  text-align: center;
}

#moon-fact-text {
  font-size: 1.5rem;
  margin-top: 30px;
}

.close {
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}



/* Scroll Hint */
.scroll-hint {
    margin-top: 40px;
    font-size: 1.2rem;
    color: #ffff00;
    animation: bounce 2s infinite;
}
@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}

/* Highlight Notes */
 .text-panel .highlight-note {
    color: #fac04c;
}


/* ============================
   Split Sections (Text + Viz)
============================ */
.section-content.split { flex-direction: row; height: 100%; gap: 0; }

.text-panel {
    flex: 0 0 40%;
    padding: 60px 50px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: rgba(20,20,20,0.5);
    border-right: 1px solid #444;
    box-sizing: border-box;
}

.text-panel h2 {
    font-size: 2.5rem;
    color: #ffff00;
    margin-bottom: 25px;
}

.text-panel p {
    font-size: 1.2rem;
    line-height: 1.8;
    color: #ccc;
    margin: 15px 0;
}

.text-panel ul { margin: 20px 0; padding-left: 30px; }
.text-panel li { margin: 12px 0; line-height: 1.8; font-size: 1.15rem; }
.text-panel strong { color: #fff; font-size: 1.2rem; }

.viz-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
}

/* Info Box */
.info-box {
    background: rgba(255,255,0,0.1);
    border: 1px solid #ffff00;
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    font-size: 1.1rem;
    line-height: 1.7;
}
.info-box strong { color: #ffff00; font-size: 1.15rem; }

/* ============================
   Visualization Containers
============================ */
#mareMapVisualization,
#craterVizVisualization,
#mareStatsVisualization,
#timelineVisualization {
    width: 100%;
    height: 80vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(0,0,0,0.2);
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
}

#mareMapVisualization svg,
#craterVizVisualization svg,
#mareStatsVisualization svg,
#timelineVisualization svg {
    max-width: 100%;
    max-height: 100%;
    border-radius: 8px;
    box-shadow: 0 0 30px rgba(255,255,255,0.05);
}

/* ============================
   Crater Timeline (Section 5)
============================ */
/* Diameter indicator dot matching timeline crater style */
.diameter-indicator {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-color: rgba(255,165,0,0.6); 
    border: 1px solid #fff;                 
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
}

/* Slider container and alignment */
#sliderContainer {
    text-align: center;
    margin: 20px 0;
    width: 100%;
}

#sliderContainer label {
    font-size: 1.6em; /* increase as needed */
    font-weight: bold;
    color: #ffff00;   /* optional: match slider display color */
}

.slider-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
}

/* Slider track */
#timestepSlider {
    flex: 1;
    max-width: 600px;
    height: 8px;
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
    cursor: pointer;
}

/* Slider thumb */
#timestepSlider::-webkit-slider-thumb,
#timestepSlider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #ffff00;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 6px rgba(255,255,0,0.7);
    transition: transform 0.2s;
}

#timestepSlider:hover::-webkit-slider-thumb,
#timestepSlider:hover::-moz-range-thumb {
    transform: scale(1.2);
}

/* Display the current slider value */
.timestep-display {
    color: #ffff00;
    font-size: 1.8em;
    font-weight: bold;
    min-width: 40px;
    text-align: center;
    background: rgba(255,255,0,0.1);
    padding: 8px 16px;
    border-radius: 6px;
    border: 2px solid rgba(255,255,0,0.3);
}

/* ============================
   Mare Stats Panel (Section 6)
============================ */
.text-panel {
    position: relative;
}

#mareStatsPanel {
    position: relative !important;
    left: auto !important;
    right: auto !important;
    background: rgba(30, 30, 30, 0.8);
    border-radius: 12px;
    padding: 24px;
    margin-top: 24px;
    border: 1px solid rgba(255, 255, 0, 0.2);
    overflow-y: auto; /* Allow scrolling */
    max-height: calc(100vh - 300px); /* Limit height to viewport */
}

#mareStatsPanel h3 { 
    color: #ffff00; 
    margin-bottom: 24px; 
    font-size: 24px; 
    border-bottom: 2px solid rgba(255, 255, 0, 0.4); 
    padding-bottom: 12px;
    text-align: center;
}

/* Main Layout: Stats Left, Histogram Right */
.stats-layout {
    display: grid;
    grid-template-columns: 0.8fr 1.2fr;
    gap: 24px;
    align-items: stretch;
    min-height: 300px; /* Reduced from 400px */
}

/* Stats Container - Left Column */
#mareStatsContainer {
    display: flex;
    flex-direction: column;
    gap: 20px;
    justify-content: center;
}

.stat-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.stat-label {
    font-size: 13px;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
}

.stat-value {
    font-size: 28px;
    font-weight: bold;
    color: #fff;
    line-height: 1.2;
}

.stat-value.highlight {
    color: #ffff00;
}

/* Histogram Container - Right Column */
.histogram-container {
    width: 100%;
    max-width: 100%;
    padding: 16px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    min-height: 280px; /* Reduced */
}

.histogram-title {
    font-size: 12px;
    color: #aaaaaa;
    text-align: center;
    margin-bottom: 16px;
    text-transform: uppercase;
    letter-spacing: 1px;
    flex-shrink: 0;
}

/* Histogram SVG */
#mareSizeHistogram { 
    background: transparent !important;
    border-radius: 8px; 
    display: block !important;
    max-width: 100% !important; /* Constrain to container */
    height: auto !important;
}

/* Legend */
.legend {
    display: flex;
    justify-content: center;
    gap: 24px;
    margin-bottom: 20px;
    padding: 12px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: #ccc;
}

.legend-color {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.3);
}

/* Crater Extremes - Full Width Below */
#panelCraters {
    margin-top: 24px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.crater-extreme {
    background: rgba(255, 255, 255, 0.04);
    border-left: 3px solid #ffff00;
    padding: 14px 16px;
    border-radius: 6px;
}

.crater-extreme-label {
    color: #ffff00;
    font-weight: bold;
    font-size: 16px;
    margin-bottom: 6px;
}

.crater-extreme-details {
    color: #ccc;
    font-size: 13px;
    line-height: 1.6;
}

#mareStatsPanel .stat-survived { color: #00ffbf; }
#mareStatsPanel .stat-erased { color: #ff4d4d; }
#mareStatsPanel .stat-total { color: #fff; font-weight: bold; }

/* Responsive adjustments */
@media (max-width: 1024px) {
    .stats-layout {
        grid-template-columns: 1fr;
        gap: 24px;
        min-height: auto;
    }
    
    #panelCraters {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .stat-value {
        font-size: 24px;
    }
    
    #mareStatsPanel {
        padding: 20px;
    }
}

/* ============================
   Mare Map & Craters
============================ */
.mare-polygon { fill: rgba(9,255,0,0.1); stroke: rgba(124,247,72,1); stroke-width: 1; cursor: pointer; transition: fill 0.2s, stroke 0.2s; }
.mare-polygon.hover { fill: rgba(255,0,225,0.3); stroke: rgb(217,0,255); }
.mare-polygon.selected { stroke: #ffff00 !important; stroke-width: 2 !important; transition: stroke 0.2s ease-in-out; }
.mare-label { font-size: 15px; fill: rgb(189,231,22); text-anchor: middle; }
.mare-arrow { stroke: rgb(255,247,0); stroke-width: 2px; }

.crater { stroke: #d3a0c7; stroke-width: 0.3; opacity: 0.8; cursor: pointer; transition: all 0.2s ease; }
.crater-hover { fill: rgba(247,124,29,0.4); stroke: #d25151; stroke-width: 0.5; opacity: 0.9; }

.tooltip {
    position: absolute;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 12px 15px;
    border-radius: 6px;
    pointer-events: none;
    font-size: 15px;
    z-index: 1000;
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    line-height: 1.6;
}
.tooltip strong { color: #ffff00; font-size: 16px; }

.hexbin-group path { stroke: #fff; stroke-width: 0.5px; fill-opacity: 0.8; transition: fill 0.4s, opacity 0.4s; }
.hexbin-group path:hover { fill-opacity: 1; cursor: pointer; }

/* Animation Button */
.formation-controls { display: flex; align-items: center; margin: 10px 0; position: relative; z-index: 10; }
.formation-button { padding: 6px 12px; font-size: 20px; cursor: pointer; background-color: #ffaa00; border: none; border-radius: 4px; color: #000; transition: background 0.2s; }
.formation-button:hover { background-color: #ff9500; }

/* ============================
   Responsive
============================ */

@media (max-width: 1024px) {
    .section-content.split { flex-direction: column; }
    .text-panel { flex: 0 0 auto; max-height: 50vh; border-right: none; border-bottom: 1px solid #444; }
    .viz-panel { flex: 1; }
    #mareMapVisualization,
    #craterVizVisualization,
    #mareStatsVisualization,
    #timelineVisualization { height: 45vh; }
    .text-panel h2 { font-size: 2rem; }
    .text-panel p, .text-panel li { font-size: 1.05rem; }
}

@media (max-width: 768px) {
    .section-content.centered h1 { font-size: 3rem; }
    .section-content.centered h2 { font-size: 2.2rem; }
    .section-content.centered p { font-size: 1.1rem; }
    .text-panel { padding: 30px 25px; }
    #timestepSlider { max-width: 80%; }
    #mareStatsPanel { right: 10px; left: 10px; bottom: 10px; top: auto; padding: 16px; }
}

.histogram-container {
    display: flex;
    flex-direction: column;   /* Keep elements stacked vertically */
    align-items: center;      /* Centers SVGs (and titles) horizontally */
    justify-content: center;  /* Optional: vertical centering */
}

@media (min-width: 1600px) {
    html {
        font-size: 115%;
    }

    .text-panel p,
    .text-panel li {
        font-size: 1.35rem;
    }

    .section-content.centered p {
        max-width: 1000px;
    }
}
